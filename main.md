# World of Warcraft

## 描述

### 司令部Headquarter

魔兽世界的西面是红魔军的司令部，东面是蓝魔军的司令部。两个司令部之间是依次排列的若干城市，城市从西向东依次编号为$1,2,\dots,N(N\leq 20)$。红魔军的司令部算作编号为$0$的城市，蓝魔军的司令部算作编号为$N+1$的城市。司令部有生命元，用于制造武士。

### 武器类型WeaponType

武士可以拥有武器。

武器有三种，**sword**, **bomb**,和**arrow**，编号分别为$0,1,2$。

#### 武器特性

**伤害/damage**, **耐久度/durability**

| 武器类型  | damage       | durability |
| --------- | ------------ | ---------- |
| SWORD     | $^{1,2}20\%$ | ***INF***  |
| $^3$BOMB  | ***INF***    | $1$        |
| $^4$ARROW | $R$          | $3$        |

#### 注

1. SWORD初始伤害为拥有者攻击力$*20\%$（下取整），在每次使用后$*80\%$（下取整），为$0$时视为失去。

	*被缴获时不重新计算。*

2. SWORD伤害为攻击力基础上附加。

3. 拥有BOMB的武士，在战斗开始前，若判断自己将被杀死，则使用BOMB。武士不预测对方是否会使用BOMB。

4. 拥有ARROW的武士就会放箭攻击下一个城市（若非司令部）的敌人（若存在）而**不被还击**。*两个相邻的武士可能同时放箭把对方射死。*

### 战斗Battle

#### 战斗流程

武士降生后就朝对方司令部走，在经过的城市如果遇到敌人就会发生战斗。

每次战斗只有一方发起主动进攻一次。

攻击伤害 $=\mathbf{atk}+\mathbf{dmg}$

被进攻者若没死，就会发起**反击**

反击伤害 $=[\mathbf{atk}/2]+\mathbf{dmg}$

*反击可能致敌人于死地*。

#### 结算

- 胜利：武士存活，敌人死亡

若*胜利*：*按照顺序*

1. 若其司令部有$8$个生命元，则向其发送$8$个生命元作为奖励，使其生命值增加$8$。若司令部的生命元不足以奖励所有的武士，则优先奖励**距离敌方司令部近**的武士。
2. 司令部立即取得该城市中所有的生命元。

若双方存活：双方都不能拿走发生战斗的城市的生命元。

### 城市City

城市可以插旗子🔴/🔵。一开始所有城市都没有旗子⚪️。

#### 先攻

🔴+奇数编号⚪️：红方

🔵+偶数编号⚪️：蓝方

#### 插旗

当某个城市有连续两场战斗都是同一方的武士杀死敌人，那么该城市就会插上胜方的旗帜。

若原来插着败方的旗帜，则败方旗帜落下。

旗帜一旦插上，就一直插着，直到被敌人更换。

一个城市最多只能插一面旗帜，旗帜没被敌人更换前，也不会再次插同颜色的旗。

### 武士类型WarriorType

两军的司令部都会制造武士。武士一共有**dragon** 、**ninja**、**iceman**、**lion**、**wolf** 五种。

每种武士都有**编号/num**、**生命值/str**、**攻击力/atk**这三种属性。

双方的武士编号都是从$1$开始计算。

红方制造出来的第$n$个武士，编号就是$n$。同样，蓝方制造出来的第$n$个武士，编号也是$n$。

武士在刚降生的时候有一个初始的生命值。

生命值在战斗中会发生变化，如果生命值减少到$0$（生命值变为负数时应当做变为$0$处理），则武士死亡（消失）。

#### 武士特性

| 武士类型 | 武器                                  | 武器上限 | 特性                            |
| -------- | ------------------------------------- | -------- | ------------------------------- |
| DRAGON   | $\mathbf{num}\%3$                     | $1$      | $^1$士气morale                  |
| NINJA    | $\mathbf{num}\%3,(\mathbf{num}+1)\%3$ | $2$      | 不反击                          |
| ICEMAN   | $\mathbf{num}\%3$                     | 1        | $^2$行动消耗                    |
| LION     | /                                     | /        | $^3$忠诚度loyalty，$^4$生命转移 |
| WOLF     | /                                     | /        | $^5$缴获武器                    |

#### 注

*按照顺序*

1. 士气初始值为$\mathbf{str\_of\_headquarter}/\mathbf{str\_of\_dragon}$，（降生后）

	1. DRAGON每次*胜利*，$\mathbf{morale}+0.2$；每次*未胜*，$\mathbf{morale}-0.2$。
	2. DRAGON**主动进攻**后，若未战死，且$\mathbf{morale}>0.8$，就会欢呼。

2. ICEMAN每前进$2$步，在第二步完成时$\mathbf{str}-9,\mathbf{atk}+20$。若$\mathbf{str}-9\leq 0$，则$\mathbf{str}=1$。

3. 忠诚度初始值为$\mathbf{str\_of\_headquarter}$（降生后）

	LION每次*未胜*，$\mathbf{loyalty}-K$。若$\mathbf{loyalty}\leq 0$，且未达到敌方司令部，则LION逃离战场，永久消失。

4. LION战死，则将其*战斗前*（该小时40分前）$\mathbf{str}$转移至对手

5. WOLF降生时无武器，但获胜时缴获对手武器，己方已有武器不缴获。



### 事件

| 时间 | 事件                                           |
| ---- | ---------------------------------------------- |
| $00$ | $^1$武士降生                                   |
| $05$ | LION逃跑                                       |
| $10$ | 武士前进                                       |
| $20$ | 城市产出$10$生命元                             |
| $30$ | 若某城市只有一个武士，武士将生命元转移至司令部 |
| $35$ | $^2$放箭                                       |
| $38$ | 评估是否使用BOMB                               |
| $40$ | $^3$战斗                                       |
| $50$ | 司令部报告生命元数                             |
| $55$ | 武士报告武器情况                               |

1. 红方顺序：ICEMAN, LION, WOLF, NINJA, DRAGON

	蓝方顺序：LION, DRAGON, NINJA, ICEMAN, WOLF

	制造初始生命值为$m$的武士，司令部中的生命元$-m$。

	若司令部中的生命元不足以制造某武士，则等至获得足够生命元后的第一个整点制造该武士。

2. 放箭事件发生在箭发出城市

	放箭不算战斗，放箭武士不获得任何好处，且不影响敌人城市旗帜

3. 若敌人已被射死，仍视为发生战斗，存活者获胜。

	此情况无**主动进攻，反击，战死**事件，但战斗胜利后事件发生：WOLF可缴获武器、旗帜可更换、DRAGON判断是否欢呼。

### 结束

武士到达对方司令部后就算完成任务了，从此就呆在那里无所事事。

任何一方的司令部里若是出现了2个敌人，则认为该司令部已被敌人占领。

任何一方的司令部被敌人占领，则战争结束。战争结束之后就不会发生任何事情了。

### 要求

给定一个时间$T(min)$，顺序输出从$0$到此$T$的所有事件。

| 时间 | 事件         | 样例                                                         | 特殊                                                         |
| ---- | ------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| $00$ | 武士降生     | 000:00 blue lion 1 born                                      | Its loyalty is 24<!--DRAGON-->                               |
| $05$ | LION逃跑     | 000:05 blue lion 1 ran away                                  | /                                                            |
| $10$ | 武士前进     | 000:10 red iceman 1 marched to city 1 with 20 elements and force 30 | /                                                            |
| $10$ | 占领         | 003:10 blue headquarter was taken                            |                                                              |
| $35$ | 武士放箭     | 000:35 blue dragon 1 shot                                    | 000:35 blue dragon 1 shot and killed red lion 4<!--KILLED ENEMY--> |
| $38$ | 使用BOMB     | 000:38 blue dragon 1 used a bomb and killed red lion 7       |                                                              |
| $40$ | 主动进攻     | 000:40 red iceman 1 attacked blue lion 1 in city 1 with 20 elements and force 30 |                                                              |
| $40$ | 反击         | 001:40 blue dragon 2 fought back against red lion 2 in city 1 |                                                              |
| $40$ | 战死         | 001:40 red lion 2 was killed in city 1                       |                                                              |
| $40$ | 欢呼         | 003:40 blue dragon 2 yelled in city 4                        |                                                              |
| $40$ | 获取生命元   | 001:40 blue dragon 2 earned 10 elements for his headquarter  |                                                              |
| $40$ | 升旗         | 004:40 blue flag raised in city 4                            |                                                              |
| $50$ | 司令部报告   | 100 elements in red headquarter                              |                                                              |
| $55$ | $^1$武士报告 | blue wolf 2 has arrow(2),bomb,sword(23) blue wolf 4 has no weapon |                                                              |
|      |              |                                                              |                                                              |

**输出事件时：**

首先按**时间顺序**输出；

同一时间发生的事件，按发生地点**从西向东**依次输出. 武士前进的事件, 算是发生在目的地。

在一次战斗中事件都算同时发生，其时间就是战斗开始时间。一次战斗中的这些事件，序号小的应该先输出。

两个武士同时抵达同一城市，则先输出红武士的前进事件，后输出蓝武士的。

对于同一城市，同一时间发生的事情，先输出红方的，后输出蓝方的。

显然，占领发生之前的一瞬间一定发生了前进事件。输出时，这两件事算同一时间发生，但是应先输出前进事件

虽然任何一方的司令部被占领之后，就不会有任何事情发生了。但和司令部被占领同时发生的事件，全都要输出。

